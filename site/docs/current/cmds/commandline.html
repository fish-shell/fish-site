
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>commandline - set or get the current command line buffer &#8212; fish-shell 3.6.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css" />
    <link rel="stylesheet" type="text/css" href="/docs/shared/style.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="complete - edit command specific tab-completions" href="complete.html" />
    <link rel="prev" title="command - run a program" href="command.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/fish.png" />
     

  </head><body><div id="fmain">  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
    <li><img src="../_static/fish.png" alt=""
             style="width: 80px; height: 80px; vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://fishshell.com/">fish-shell</a> &#187;</li>
    
    <a href="../index.html">fish-shell 3.6.0 documentation</a> &#187;
    

          <li class="nav-item nav-item-1"><a href="../commands.html" accesskey="U">Commands</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">commandline - set or get the current command line buffer</a></li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
    </li>
    
    <div id="old-docs-notice" style="display: none">
        This documents an old version of fish.
        <a href="../../current/">See the latest release.</a>
    </div>

      </ul>
    </div>    

    <div class="document">
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div>
<h3><a href="../index.html">Documents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive.html">Interactive use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">The fish language</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../commands.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fish_for_bash_users.html">Fish for bash users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../completions.html">Writing your own completions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>

</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
<div>
<h4><a href="../index.html">Sections</a></h4>
<ul>
<li><a class="reference internal" href="#">commandline - set or get the current command line buffer</a><ul>
<li><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>

</div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="commandline-set-or-get-the-current-command-line-buffer">
<span id="cmd-commandline"></span><h1>commandline - set or get the current command line buffer<a class="headerlink" href="#commandline-set-or-get-the-current-command-line-buffer" title="Permalink to this heading">¶</a></h1>
<section id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this heading">¶</a></h2>
<div class="highlight-fish-synopsis notranslate"><div class="highlight"><pre><span></span><span class="nf">commandline</span><span class="w"> </span><span class="g g-Other">[</span><span class="no">OPTIONS</span><span class="g g-Other">]</span><span class="w"> </span><span class="g g-Other">[</span><span class="no">CMD</span><span class="g g-Other">]</span>
</pre></div>
</div>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">commandline</span></code> can be used to set or get the current contents of the command line buffer.</p>
<p>With no parameters, <code class="docutils literal notranslate"><span class="pre">commandline</span></code> returns the current value of the command line.</p>
<p>With <strong>CMD</strong> specified, the command line buffer is erased and replaced with the contents of <strong>CMD</strong>.</p>
<p>The following options are available:</p>
<dl class="simple">
<dt><strong>-C</strong> or <strong>--cursor</strong></dt><dd><p>Set or get the current cursor position, not the contents of the buffer.
If no argument is given, the current cursor position is printed, otherwise the argument is interpreted as the new cursor position.
If one of the options <strong>-j</strong>, <strong>-p</strong> or <strong>-t</strong> is given, the position is relative to the respective substring instead of the entire command line buffer.</p>
</dd>
<dt><strong>-B</strong> or <strong>--selection-start</strong></dt><dd><p>Get current position of the selection start in the buffer.</p>
</dd>
<dt><strong>-E</strong> or <strong>--selection-end</strong></dt><dd><p>Get current position of the selection end in the buffer.</p>
</dd>
<dt><strong>-f</strong> or <strong>--function</strong></dt><dd><p>Causes any additional arguments to be interpreted as input functions, and puts them into the queue, so that they will be read before any additional actual key presses are.
This option cannot be combined with any other option.
See <a class="reference internal" href="bind.html"><span class="doc">bind</span></a> for a list of input functions.</p>
</dd>
<dt><strong>-h</strong> or <strong>--help</strong></dt><dd><p>Displays help about using this command.</p>
</dd>
</dl>
<p>The following options change the way <code class="docutils literal notranslate"><span class="pre">commandline</span></code> updates the command line buffer:</p>
<dl class="simple">
<dt><strong>-a</strong> or <strong>--append</strong></dt><dd><p>Do not remove the current commandline, append the specified string at the end of it.</p>
</dd>
<dt><strong>-i</strong> or <strong>--insert</strong></dt><dd><p>Do not remove the current commandline, insert the specified string at the current cursor position</p>
</dd>
<dt><strong>-r</strong> or <strong>--replace</strong></dt><dd><p>Remove the current commandline and replace it with the specified string (default)</p>
</dd>
</dl>
<p>The following options change what part of the commandline is printed or updated:</p>
<dl class="simple">
<dt><strong>-b</strong> or <strong>--current-buffer</strong></dt><dd><p>Select the entire commandline, not including any displayed autosuggestion (default).</p>
</dd>
<dt><strong>-j</strong> or <strong>--current-job</strong></dt><dd><p>Select the current job - a <strong>job</strong> here is one pipeline.
Stops at logical operators or terminators (<strong>;</strong>, <strong>&amp;</strong>, and newlines).</p>
</dd>
<dt><strong>-p</strong> or <strong>--current-process</strong></dt><dd><p>Select the current process - a <strong>process</strong> here is one command.
Stops at logical operators, terminators, and pipes.</p>
</dd>
<dt><strong>-s</strong> or <strong>--current-selection</strong></dt><dd><p>Selects the current selection</p>
</dd>
<dt><strong>-t</strong> or <strong>--current-token</strong></dt><dd><p>Selects the current token</p>
</dd>
</dl>
<p>The following options change the way <code class="docutils literal notranslate"><span class="pre">commandline</span></code> prints the current commandline buffer:</p>
<dl class="simple">
<dt><strong>-c</strong> or <strong>--cut-at-cursor</strong></dt><dd><p>Only print selection up until the current cursor position.</p>
</dd>
<dt><strong>-o</strong> or <strong>--tokenize</strong></dt><dd><p>Tokenize the selection and print one string-type token per line.</p>
</dd>
</dl>
<p>If <code class="docutils literal notranslate"><span class="pre">commandline</span></code> is called during a call to complete a given string using <code class="docutils literal notranslate"><span class="pre">complete</span> <span class="pre">-C</span> <span class="pre">STRING</span></code>, <code class="docutils literal notranslate"><span class="pre">commandline</span></code> will consider the specified string to be the current contents of the command line.</p>
<p>The following options output metadata about the commandline state:</p>
<dl class="simple">
<dt><strong>-L</strong> or <strong>--line</strong></dt><dd><p>Print the line that the cursor is on, with the topmost line starting at 1.</p>
</dd>
<dt><strong>-S</strong> or <strong>--search-mode</strong></dt><dd><p>Evaluates to true if the commandline is performing a history search.</p>
</dd>
<dt><strong>-P</strong> or <strong>--paging-mode</strong></dt><dd><p>Evaluates to true if the commandline is showing pager contents, such as tab completions.</p>
</dd>
<dt><strong>--paging-full-mode</strong></dt><dd><p>Evaluates to true if the commandline is showing pager contents, such as tab completions and all lines are shown (no “&lt;n&gt; more rows” message).</p>
</dd>
<dt><strong>--is-valid</strong></dt><dd><p>Returns true when the commandline is syntactically valid and complete.
If it is, it would be executed when the <code class="docutils literal notranslate"><span class="pre">execute</span></code> bind function is called.
If the commandline is incomplete, return 2, if erroneus, return 1.</p>
</dd>
</dl>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">commandline</span> <span class="pre">-j</span> <span class="pre">$history[3]</span></code> replaces the job under the cursor with the third item from the command line history.</p>
<p>If the commandline contains</p>
<div class="highlight-fish-docs-samples notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;_ </span><span class="nf">echo</span><span class="w"> </span><span class="o">$flounder</span><span class="w"> </span><span class="p">&gt;&amp;2</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">less</span><span class="p">;</span><span class="w"> </span><span class="o">and</span><span class="w"> </span><span class="nf">echo</span><span class="w"> </span><span class="o">$catfish</span>
</pre></div>
</div>
<p>(with the cursor on the “o” of “flounder”)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$flounder</span> <span class="pre">&gt;&amp;</span></code> is the first process, <code class="docutils literal notranslate"><span class="pre">less</span></code> the second and <code class="docutils literal notranslate"><span class="pre">and</span> <span class="pre">echo</span> <span class="pre">$catfish</span></code> the third.</p>
<p><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$flounder</span> <span class="pre">&gt;&amp;2</span> <span class="pre">|</span> <span class="pre">less</span></code> is the first job, <code class="docutils literal notranslate"><span class="pre">and</span> <span class="pre">echo</span> <span class="pre">$catfish</span></code> the second.</p>
<p><strong>$flounder</strong> is the current token.</p>
<p>More examples:</p>
<div class="highlight-fish-docs-samples notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;_ </span><span class="nf">commandline</span><span class="w"> </span><span class="no">-t</span>
<span class="go">$flounder</span>
<span class="gp">&gt;_ </span><span class="nf">commandline</span><span class="w"> </span><span class="no">-ct</span>
<span class="go">$fl</span>
<span class="gp">&gt;_ </span><span class="nf">commandline</span><span class="w"> </span><span class="no">-b</span><span class="w"> </span><span class="c"># or just commandline</span>
<span class="go">echo $flounder &gt;&amp;2 | less; and echo $catfish</span>
<span class="gp">&gt;_ </span><span class="nf">commandline</span><span class="w"> </span><span class="no">-p</span>
<span class="go">echo $flounder &gt;&amp;2</span>
<span class="gp">&gt;_ </span><span class="nf">commandline</span><span class="w"> </span><span class="no">-j</span>
<span class="go">echo $flounder &gt;&amp;2 | less</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div> 
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
    <li><img src="../_static/fish.png" alt=""
             style="width: 80px; height: 80px; vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://fishshell.com/">fish-shell</a> &#187;</li>
    
    <a href="../index.html">fish-shell 3.6.0 documentation</a> &#187;
    

          <li class="nav-item nav-item-1"><a href="../commands.html" >Commands</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">commandline - set or get the current command line buffer</a></li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
    </li>
    
    <div id="old-docs-notice" style="display: none">
        This documents an old version of fish.
        <a href="../../current/">See the latest release.</a>
    </div>

      </ul>
    </div>  
    <div class="footer">
    &copy; Copyright 2023, fish-shell developers.
    <br />
    <a href="https://github.com/fish-shell/fish-shell/issues">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.0.0.
    </div>
</div>

<script type="text/javascript">
 FISH_DOCS_VERSION = "3.6";

 function copy_to_clipboard(it) {
     // Find the pre tag we're interested in.
     var pre = it.target;
     while (pre.tagName != "PRE") pre = pre.parentNode;
     var txt = "";
     // Cheesy: If we have a prompt,
     // we only copy prompted lines,
     // by splitting and matching and stuff
     if (pre.querySelector('span.gp')) {
         var texts= [];
         for (var line of pre.innerText.split('\n')) {
             if (line.match(/^>_?.*/)) {
                 texts.push(line.replace(/^>_?/, ""));
             }
         }
         txt = texts.join("\n");
     } else {
         // Even cheesier: If we don't have a prompt, we remove the button text from the end.
         var txt = pre.innerText.substring(0, pre.innerText.length - it.target.innerText.length).trim();
     }

     navigator.clipboard.writeText(txt).then(function() {
         // Success - set the text to indicate it,
         // then set it back after 2 seconds.
         var span = pre.querySelector("button span");
         if (span) {
             var oldText = span.innerText;
             span.innerText = "COPIED!";
             setTimeout(function() {
                 span.innerText = oldText;
             }, 2000);
         }
     }, function() {
     });
 }

  (function () {
      // Add copy buttons to all the codeblocks.
      var codeblocks = document.querySelectorAll('div > pre');

      var button = document.createElement('button');
      var span = document.createElement('span');
      span.innerText = "COPY";
      button.appendChild(span);

      for (var i of codeblocks) {
          var newButton = button.cloneNode(true);
          newButton.addEventListener('click', copy_to_clipboard);
          i.appendChild(newButton);
      }
  })();
</script>
<script defer type="text/javascript" src="/docs/shared/script.js"></script>

  </body>
</html>