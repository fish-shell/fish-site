
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>math - perform mathematics calculations &#8212; fish-shell 3.3.1 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="nextd - move forward through directory history" href="nextd.html" />
    <link rel="prev" title="jobs - print currently running jobs" href="jobs.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/fish.png" />
     

  </head><body><div id="fmain">  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
    <li><img src="../_static/fish.png" alt=""
             style="width: 80px; height: 80px; vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://fishshell.com/">fish-shell</a> &#187;</li>
    
    <a href="../index.html">fish-shell 3.3.1 documentation</a> &#187;
    

          <li class="nav-item nav-item-1"><a href="../commands.html" accesskey="U">Commands</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">math - perform mathematics calculations</a></li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
    </li>

      </ul>
    </div>    

<div class="document">
      <div id="old-docs-notice" style="background-color: #ffffa0; color: black; padding: 1em; margin: .5em 0; border-radius: 5px;">This documents an old version of fish. <a href="/docs/current/">See the latest release.</a></div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div>
<h3><a href="../index.html">Documents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive.html">Interactive use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language.html">The fish language</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../commands.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fish_for_bash_users.html">Fish for bash users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../completions.html">Writing your own completions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>

</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
<div>
<h4><a href="../index.html">Sections</a></h4>
<ul>
<li><a class="reference internal" href="#">math - perform mathematics calculations</a><ul>
<li><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#return-values">Return Values</a></li>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
<li><a class="reference internal" href="#operators">Operators</a></li>
<li><a class="reference internal" href="#constants">Constants</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#compatibility-notes">Compatibility notes</a></li>
</ul>
</li>
</ul>

</div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="math-perform-mathematics-calculations">
<span id="cmd-math"></span><h1>math - perform mathematics calculations<a class="headerlink" href="#math-perform-mathematics-calculations" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<div class="highlight-fish-docs-samples notranslate"><div class="highlight"><pre><span></span><span class="nf">math</span><span class="w"> </span><span class="no">[-sN</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">--scale=N]</span><span class="w"> </span><span class="no">[-bBASE</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">--base=BASE]</span><span class="w"> </span><span class="no">[--]</span><span class="w"> </span><span class="no">EXPRESSION</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">math</span></code> performs mathematical calculations. It supports simple operations such as addition, subtraction, and so on, as well as functions like <code class="docutils literal notranslate"><span class="pre">abs()</span></code>, <code class="docutils literal notranslate"><span class="pre">sqrt()</span></code> and <code class="docutils literal notranslate"><span class="pre">ln()</span></code>.</p>
<p>By default, the output is a floating-point number with trailing zeroes trimmed. To get a fixed representation, the <code class="docutils literal notranslate"><span class="pre">--scale</span></code> option can be used, including <code class="docutils literal notranslate"><span class="pre">--scale=0</span></code> for integer output.</p>
<p>Keep in mind that parameter expansion happens before expressions are evaluated. This can be very useful in order to perform calculations involving shell variables or the output of command substitutions, but it also means that parenthesis (<code class="docutils literal notranslate"><span class="pre">()</span></code>) and the asterisk (<code class="docutils literal notranslate"><span class="pre">*</span></code>) glob character have to be escaped or quoted. <code class="docutils literal notranslate"><span class="pre">x</span></code> can also be used to denote multiplication, but it needs to be followed by whitespace to distinguish it from hexadecimal numbers.</p>
<p>Parentheses for functions are optional - <code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">sin</span> <span class="pre">pi</span></code> prints <code class="docutils literal notranslate"><span class="pre">0</span></code>. However, a comma will bind to the inner function, so <code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">pow</span> <span class="pre">sin</span> <span class="pre">3,</span> <span class="pre">5</span></code> is an error because it tries to give <code class="docutils literal notranslate"><span class="pre">sin</span></code> the arguments <code class="docutils literal notranslate"><span class="pre">3</span></code> and <code class="docutils literal notranslate"><span class="pre">5</span></code>. When in doubt, use parentheses.</p>
<p><code class="docutils literal notranslate"><span class="pre">math</span></code> ignores whitespace between arguments and takes its input as multiple arguments (internally joined with a space), so <code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">2</span> <span class="pre">+2</span></code> and <code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">&quot;2</span> <span class="pre">+</span>&#160;&#160;&#160; <span class="pre">2&quot;</span></code> work the same. <code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">2</span> <span class="pre">2</span></code> is an error.</p>
<p>The following options are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-sN</span></code> or <code class="docutils literal notranslate"><span class="pre">--scale=N</span></code> sets the scale of the result. <code class="docutils literal notranslate"><span class="pre">N</span></code> must be an integer or the word &quot;max&quot; for the maximum scale. A scale of zero causes results to be rounded down to the nearest integer. So <code class="docutils literal notranslate"><span class="pre">3/2</span></code> returns <code class="docutils literal notranslate"><span class="pre">1</span></code> rather than <code class="docutils literal notranslate"><span class="pre">2</span></code> which <code class="docutils literal notranslate"><span class="pre">1.5</span></code> would normally round to. This is for compatibility with <code class="docutils literal notranslate"><span class="pre">bc</span></code> which was the basis for this command prior to fish 3.0.0. Scale values greater than zero causes the result to be rounded using the usual rules to the specified number of decimal places.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-b</span> <span class="pre">BASE</span></code> or <code class="docutils literal notranslate"><span class="pre">--base</span> <span class="pre">BASE</span></code> sets the numeric base used for output (<code class="docutils literal notranslate"><span class="pre">math</span></code> always understands hexadecimal numbers as input). It currently understands &quot;hex&quot; or &quot;16&quot; for hexadecimal and &quot;octal&quot; or &quot;8&quot; for octal and implies a scale of 0 (other scales cause an error), so it will truncate the result down to an integer. This might change in the future. Hex numbers will be printed with a <code class="docutils literal notranslate"><span class="pre">0x</span></code> prefix. Octal numbers will have a prefix of <code class="docutils literal notranslate"><span class="pre">0</span></code> and aren't understood by <code class="docutils literal notranslate"><span class="pre">math</span></code> as input.</p></li>
</ul>
</div>
<div class="section" id="return-values">
<h2>Return Values<a class="headerlink" href="#return-values" title="Permalink to this headline">¶</a></h2>
<p>If the expression is successfully evaluated and doesn't over/underflow or return NaN the return <code class="docutils literal notranslate"><span class="pre">status</span></code> is zero (success) else one.</p>
</div>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">math</span></code> knows some operators, constants, functions and can (obviously) read numbers.</p>
<p>For numbers, <code class="docutils literal notranslate"><span class="pre">.</span></code> is always the radix character regardless of locale - <code class="docutils literal notranslate"><span class="pre">2.5</span></code>, not <code class="docutils literal notranslate"><span class="pre">2,5</span></code>. Scientific notation (<code class="docutils literal notranslate"><span class="pre">10e5</span></code>) and hexadecimal (<code class="docutils literal notranslate"><span class="pre">0xFF</span></code>) are also available.</p>
</div>
<div class="section" id="operators">
<h2>Operators<a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">math</span></code> knows the following operators:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">+</span></code> for addition and <code class="docutils literal notranslate"><span class="pre">-</span></code> for subtraction.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*</span></code> or <code class="docutils literal notranslate"><span class="pre">x</span></code> for multiplication, <code class="docutils literal notranslate"><span class="pre">/</span></code> for division. (Note that <code class="docutils literal notranslate"><span class="pre">*</span></code> is the glob character and needs to be quoted or escaped, <code class="docutils literal notranslate"><span class="pre">x</span></code> needs to be followed by whitespace or it looks like <code class="docutils literal notranslate"><span class="pre">0x</span></code> hexadecimal notation.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">^</span></code> for exponentiation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%</span></code> for modulo.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(</span></code> and <code class="docutils literal notranslate"><span class="pre">)</span></code> for grouping. (These need to be quoted or escaped because <code class="docutils literal notranslate"><span class="pre">()</span></code> denotes a command substitution.)</p></li>
</ul>
<p>They are all used in an infix manner - <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">+</span> <span class="pre">2</span></code>, not <code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">5</span> <span class="pre">2</span></code>.</p>
</div>
<div class="section" id="constants">
<h2>Constants<a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">math</span></code> knows the following constants:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">e</span></code> - Euler's number.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pi</span></code> - π. You know this one. Half of Tau.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tau</span></code>. Equivalent to 2π, or the number of radians in a circle.</p></li>
</ul>
<p>Use them without a leading <code class="docutils literal notranslate"><span class="pre">$</span></code> - <code class="docutils literal notranslate"><span class="pre">pi</span> <span class="pre">-</span> <span class="pre">3</span></code> should be about 0.</p>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">math</span></code> supports the following functions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">abs</span></code> - the absolute value, with positive sign</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">acos</span></code> - arc cosine</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asin</span></code> - arc sine</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">atan</span></code> - arc tangent</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">atan2</span></code> - arc tangent of two variables</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bitand</span></code>, <code class="docutils literal notranslate"><span class="pre">bitor</span></code> and <code class="docutils literal notranslate"><span class="pre">bitxor</span></code> to perform bitwise operations. These will throw away any non-integer parts and interpret the rest as an int.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ceil</span></code> - round number up to nearest integer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cos</span></code> - the cosine</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosh</span></code> - hyperbolic cosine</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exp</span></code> - the base-e exponential function</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fac</span></code> - factorial - also known as <code class="docutils literal notranslate"><span class="pre">x!</span></code> (<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">(x</span> <span class="pre">-</span> <span class="pre">1)</span> <span class="pre">*</span> <span class="pre">(x</span> <span class="pre">-</span> <span class="pre">2)</span> <span class="pre">*</span> <span class="pre">...</span> <span class="pre">*</span> <span class="pre">1</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">floor</span></code> - round number down to nearest integer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ln</span></code> - the base-e logarithm</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log</span></code> or <code class="docutils literal notranslate"><span class="pre">log10</span></code> - the base-10 logarithm</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log2</span></code> - the base-2 logarithm</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max</span></code> - returns the larger of two numbers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min</span></code> - returns the smaller of two numbers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ncr</span></code> - &quot;from n choose r&quot; combination function - how many subsets of size r can be taken from n (order doesn't matter)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">npr</span></code> - the number of subsets of size r that can be taken from a set of n elements (including different order)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pow(x,y)</span></code> returns x to the y (and can be written as <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">^</span> <span class="pre">y</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">round</span></code> - rounds to the nearest integer, away from 0</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sin</span></code> - the sine function</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sinh</span></code> - the hyperbolic sine</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sqrt</span></code> - the square root - (can also be written as <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">^</span> <span class="pre">0.5</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tan</span></code> - the tangent</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tanh</span></code> - the hyperbolic tangent</p></li>
</ul>
<p>All of the trigonometric functions use radians (the pi-based scale, not 360°).</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">1+1</span></code> outputs 2.</p>
<p><code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">$status</span> <span class="pre">-</span> <span class="pre">128</span></code> outputs the numerical exit status of the last command minus 128.</p>
<p><code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">10</span> <span class="pre">/</span> <span class="pre">6</span></code> outputs <code class="docutils literal notranslate"><span class="pre">1.666667</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">-s0</span> <span class="pre">10.0</span> <span class="pre">/</span> <span class="pre">6.0</span></code> outputs <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">-s3</span> <span class="pre">10</span> <span class="pre">/</span> <span class="pre">6</span></code> outputs <code class="docutils literal notranslate"><span class="pre">1.666</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">&quot;sin(pi)&quot;</span></code> outputs <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">5</span> <span class="pre">\*</span> <span class="pre">2</span></code> or <code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">&quot;5</span> <span class="pre">*</span> <span class="pre">2&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">5</span> <span class="pre">&quot;*&quot;</span> <span class="pre">2</span></code> all output <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">0xFF</span></code> outputs 255, <code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">0</span> <span class="pre">x</span> <span class="pre">3</span></code> outputs 0 (because it computes 0 multiplied by 3).</p>
<p><code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">bitand</span> <span class="pre">0xFE,</span> <span class="pre">0x2e</span></code> outputs 46.</p>
<p><code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">&quot;bitor(9,2)&quot;</span></code> outputs 11.</p>
<p><code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">--base=hex</span> <span class="pre">192</span></code> prints <code class="docutils literal notranslate"><span class="pre">0xc0</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">math</span> <span class="pre">'ncr(49,6)'</span></code> prints 13983816 - that's the number of possible picks in 6-from-49 lotto.</p>
</div>
<div class="section" id="compatibility-notes">
<h2>Compatibility notes<a class="headerlink" href="#compatibility-notes" title="Permalink to this headline">¶</a></h2>
<p>Fish 1.x and 2.x releases relied on the <code class="docutils literal notranslate"><span class="pre">bc</span></code> command for handling <code class="docutils literal notranslate"><span class="pre">math</span></code> expressions. Starting with fish 3.0.0 fish uses the tinyexpr library and evaluates the expression without the involvement of any external commands.</p>
<p>You don't need to use <code class="docutils literal notranslate"><span class="pre">--</span></code> before the expression, even if it begins with a minus sign which might otherwise be interpreted as an invalid option. If you do insert <code class="docutils literal notranslate"><span class="pre">--</span></code> before the expression, it will cause option scanning to stop just like for every other command and it won't be part of the expression.</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div> 
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
    <li><img src="../_static/fish.png" alt=""
             style="width: 80px; height: 80px; vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://fishshell.com/">fish-shell</a> &#187;</li>
    
    <a href="../index.html">fish-shell 3.3.1 documentation</a> &#187;
    

          <li class="nav-item nav-item-1"><a href="../commands.html" >Commands</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">math - perform mathematics calculations</a></li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; Copyright 2021, fish-shell developers.
    <br />
    <a href="https://github.com/fish-shell/fish-shell/issues">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.3.1.
    </div>
</div>

  </body>
</html>